# SpringCloud概述

## 微服务

**概念： 强调的是服务的大小，他关注的是某一点，是具体解决某一个问题/提供落地对应服务的一个服务应用，狭义的看，可以看做是IDEA中的一个个微服务工程，或者Moudel** 

**一种新的架构形式**

- **微服务是一种架构模式，他提倡将单一应用程序划分成一组小的服务，服务之间相互协调，相互配合，为用户提供最终价值。每个服务运行在其独立的进程中，服务与服务之间采用轻量级的通信机制相互协作，每个服务都围绕着具体的业务进行构建，并且能被独立的部署到生产环境中，另外，应避免统一的，集中式的服务管理机制，对具体的一个服务而言，应根据业务上下文，选择合适的语言，工具对其进行构建**

**我们的SpringCloud就是为了去解决微服务的问题而设立的（ Spring Cloud不是技术，是一个生态，就是来解决四个核心问题的 ）**

### 微服务4大核心问题

1. **服务这么多，我们的客户端如何访问？**
   - **API网关**
2. **服务之间如何进行通信？**
   - **HTTP**
   - **RPC**
3. **服务如何治理？**
   - **注册与发现**
4. **服务挂了怎么办？**
   - **熔断机制**

## 常用的解决方案

为什么我们需要这些方案？

一句话，因为**分布式基于网络，而网络又是不可靠的**

- ### Spring Cloud NetFlix 

  **停止维护**了，但是很成熟，一站式解决方案

  - **API网关**
  - **feign —-HttpClinet —-Http通信方式，同步，阻塞**
  - **服务注册发现：Eureka**
  - **熔断机制：Hysttrix**

- ###  Apache Dubbo Zookeeper（基于java的高性能rpc通信框架）

   半自动，需要整合别人的 

  -  **没有，找第三方组件，或者自己实现** 
  - **Dubbo** 
  - **服务注册发现：Zookeeper**
  - **没有，借助Hysttrix**

- ###   Spring Cloud Alibaba

  - **一站式解决方案**

- ### **服务网格~Server Mesh** 

### API网关

 **API 网关并不是微服务场景中必须的组件，如下图，不管有没有 API 网关，后端微服务都可以通过 API 很好地支持客户端的访问。** 

![](https://pic.imgdb.cn/item/6055f3a3524f85ce29e62b08.jpg)

**但对于服务数量众多、复杂度比较高、规模比较大的业务来说，引入 API 网关也有一系列的好处：**

- **聚合接口使得服务对调用者透明，客户端与后端的耦合度降低**
- **聚合后台服务，节省流量，提高性能，提升用户体验**
- **提供安全、流控、过滤、缓存、计费、监控等 API 管理功能**

## 服务注册发现

####  Eureka

**Eureka Server提供服务注册服务，各个节点启动后，会在Eureka Server中进行注册，这样EurekaServer中的服务注册表中将会存储所有可用服务节点的信息，服务节点的信息可以在界面中直观的看到。** 

## CAP原则

**CAP原则又称CAP定理，指的是在一个分布式系统中，一致性（Consistency）、可用性（Availability）、分区容错性（Partition tolerance）。CAP 原则指的是，这三个要素最多只能同时实现两点，不可能三者兼顾。** 

### 概述

1. ####  一致性（C） 

   **在分布式系统中的所有数据备份，在同一时刻是否同样的值。（等同于所有节点访问同一份最新的数据副本）** 

2. ####  可用性（A）： 

    **保证每个请求不管成功或者失败都有响应。** 

3. ####  分区容错性（P） 

    **系统中任意信息的丢失或失败不会影响系统的继续运作。** 

 **CAP原则的精髓就是要么AP，要么CP，要么AC，但是不存在CAP。如果在某个分布式系统中数据无副本， 那么系统必然满足强一致性条件， 因为只有独一数据，不会出现数据不一致的情况，此时C和P两要素具备，但是如果系统发生了网络分区状况或者宕机，必然导致某些数据不可以访问，此时可用性条件就不能被满足，即在此情况下获得了CP系统，但是CAP不可同时满足 [2] 。** 

