1. ###  处理机调度概念、层次 

   #### **调度的三个层次** 

   1. **高级调度**  

      按一定的原则从外存上处于后备队列的作业中挑选一个（或多个）作业， 给他们分配内存等必要资源，并建立相应的进程（建立PCB），以使它们获得竞争处理机的权利。 

      高级调度是辅存（外存）与内存之间的调度。每个作业只调入一次，调出一次。作业调入时会建 立相应的PCB，作业调出时才撤销PCB。高级调度主要是指调入的问题，因为只有调入的时机需要 操作系统来确定，但调出的时机必然是作业运行结束才调出。 

   2. **中级调度** 

      引入了虚拟存储技术之后，可将暂时不能运行的进程调至外存等待。等它重新具备了运行条件且 内存又稍有空闲时，再重新调入内存。

      这么做的目的是为了提高内存利用率和系统吞吐量。 暂时调到外存等待的进程状态为挂起状态。值得注意的是，PCB并不会一起调到外存，而是会常驻内存。

      PCB中会记录进程数据在外存中的存放位置，进程状态等信息，操作系统通过内存中的PCB 来保持对各个进程的监控、管理。被挂起的进程PCB会被放到的挂起队列中。  

   3. **低级调度** 

      其主要任务是按照某种方法和策略从就绪队列中选取一个进程，将处理机分配给它。 

   4. **补充知识**

      ![](https://pic.downk.cc/item/5fe202c43ffa7d37b3a7a33a.png)

   5. **进程调度的时机** 

      - 当前运行的进程主动放弃处理机 

        -  进程正常终止 
        -  运行过程中发生异常而终止 
        -  进程主动请求阻塞（如 等待I/O）  

      - 当前运行的进程被动放弃处理机 

        -  分给进程的时间片用完 
        -  有更紧急的事需要处理（如 I/O中断） 
        -  有更高优先级的进程进入就绪队列 

      - 不能进行进程调度与切换的情况 

        -  在处理中断的过程中。中断处理过程复杂，与硬件密切相关，很难做到在中断处理过程中进行进程切换。 
        -  进程在操作系统内核程序临界区中。 
        -  在原子操作过程中（原语）。原子操作不可中断，要一气呵成 

        *注：*

        *临界资源：一个时间段内只允许一个进程使用的资源。各进程需要互斥地访问临界资源。*

        *临界区：访问临界资源的那段代码。*

   6. **进程调度的方式** 

      - 非剥夺调度方式

        又称非抢占方式。只允许进程主动放弃处理机。在运行过程中即便有更紧迫的任务到达，当前进程依然会继续使用处理机，直到该进程终止或主动要求进入阻塞态。 

      - 剥夺调度方式 

        又称抢占方式。当一个进程正在处理机上执行时，如果有一个更重要或更紧迫的进程需要使用处理机，则立即暂停正在执行的进程，将处理机分配给更重要紧迫的那个进程。 

2. ### 调度算法

   1. ####  调度算法的评价指标 

      - **周转时间 = 作业完成时间 – 作业提交时间** 
      -  **带权周转时间 = 作业周转时间 / 作业实际运行的时间**  
      -  **等待时间 = 周转时间 – 运行时间** 

   2. #### 调度算法

      1. #####  先来先服务 

         ![](https://pic.downk.cc/item/5fe31cf03ffa7d37b3b7c4d4.png)

      2. #####  最短作业优先 

         ![](https://pic.downk.cc/item/5fe31cf03ffa7d37b3b7c4c9.png)

      3. #####  最高响应比优先 

         ![](https://pic.downk.cc/item/5fe31cf03ffa7d37b3b7c4cf.png)

      4. ##### 时间片轮转

         ![](https://pic.downk.cc/item/5fe31d293ffa7d37b3b7e7d9.png)

      5. ##### 优先级调度

         ![](https://pic.downk.cc/item/5fe31d293ffa7d37b3b7e7e0.png)

      6. ##### 多级反馈队列

         ![](https://pic.downk.cc/item/5fe31d293ffa7d37b3b7e7f6.png)



